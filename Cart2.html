من می‌توانم یک ساختار کلی با استفاده از HTML، CSS، JavaScript، jQuery و Bootstrap برای ایجاد کارت‌های متحرک با قابلیت‌هایی که فرمودید، ایجاد کنم. این کد شامل عناصر اصلی و منطق مورد نیاز برای نمایش کارت‌ها، باز شدن صفحه جدید برای جزئیات، قابلیت نظر و امتیازدهی، اسکرول افقی و جستجو خواهد بود.

```html
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مقالات حقوقی - وکالت، طلاق، مهریه و ...</title>
    <meta name="description" content="مجموعه مقالات حقوقی در مورد وکالت، طلاق، مهریه، حضانت، ارثیه، دعاوی و درگیری‌ها. با امکان جستجو، امتیازدهی و ثبت نظر.">
    <meta name="keywords" content="وکالت، طلاق، مهریه، حضانت، ارثیه، دعوا، درگیری، امور حقوقی، مقالات حقوقی، مشاوره حقوقی">
    <meta name="author" content="Your Name">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    <!-- Font Awesome for icons (stars) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* Custom CSS */
        body {
            font-family: 'Tahoma', sans-serif; /* Example font */
            background-color: #f8f9fa;
        }
        .container {
            margin-top: 30px;
        }
        .card-container {
            display: flex;
            overflow-x: hidden; /* Hide scrollbar for initial 4 cards */
            padding-bottom: 20px; /* Space for scrollbar */
        }
        .card-item {
            flex: 0 0 280px; /* Fixed width for each card */
            margin: 15px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            text-align: right;
            background-color: #fff;
        }
        .card-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        .card-item img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }
        .card-body {
            padding: 20px;
        }
        .card-title {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        .card-text {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.6;
            height: 70px; /* Limit text height */
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .article-modal .modal-content {
            border-radius: 10px;
        }
        .article-modal .modal-header {
            border-bottom: none;
            padding-bottom: 0;
            text-align: right;
        }
        .article-modal .modal-title {
            font-weight: bold;
            color: #333;
        }
        .article-modal .modal-body {
            padding-top: 0;
            text-align: right;
        }
        .rating-stars .fa-star {
            color: #ccc;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .rating-stars .fa-star.active,
        .rating-stars .fa-star:hover {
            color: #ffc107; /* Bootstrap yellow star */
        }
        .review-section {
            margin-top: 30px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        .review-section textarea {
            resize: vertical;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .card-item {
                flex: 0 0 90%; /* Adjust card width for smaller screens */
                margin: 15px auto;
            }
            .card-container {
                justify-content: center;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 class="text-center mb-4">مقالات حقوقی</h1>

        <!-- Search Bar -->
        <div class="row mb-4 justify-content-center">
            <div class="col-md-6">
                <div class="input-group">
                    <input type="text" id="search-input" class="form-control" placeholder="جستجو بر اساس عنوان مقاله..." aria-label="جستجو">
                    <button class="btn btn-primary" type="button" id="search-button">جستجو</button>
                </div>
            </div>
        </div>

        <!-- Cards Display -->
        <div class="card-container" id="article-cards-container">
            <!-- Cards will be injected here by JavaScript -->
        </div>

        <div class="text-center mt-3 mb-5">
            <button class="btn btn-secondary" id="show-all-articles-btn">نمایش همه مقالات</button>
        </div>
    </div>

    <!-- Article Detail Modal -->
    <div class="modal fade article-modal" id="articleDetailModal" tabindex="-1" aria-labelledby="articleDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalArticleTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
                </div>
                <div class="modal-body">
                    <img id="modalArticleImage" class="img-fluid mb-3" alt="Article Image">
                    <p id="modalArticleContent"></p>

                    <!-- Review and Rating Section -->
                    <div class="review-section">
                        <h4>نظر شما</h4>
                        <div class="rating-stars mb-3" data-article-id="">
                            <i class="fa-solid fa-star" data-rating="1"></i>
                            <i class="fa-solid fa-star" data-rating="2"></i>
                            <i class="fa-solid fa-star" data-rating="3"></i>
                            <i class="fa-solid fa-star" data-rating="4"></i>
                            <i class="fa-solid fa-star" data-rating="5"></i>
                        </div>
                        <input type="hidden" id="selected-rating" value="0">
                        <div class="form-floating mb-3">
                            <textarea class="form-control" placeholder="نظر خود را بنویسید..." id="review-comment" style="height: 100px"></textarea>
                            <label for="review-comment">نظر خود را بنویسید</label>
                        </div>
                        <button class="btn btn-primary" id="submit-review-btn">ارسال نظر</button>

                        <h5 class="mt-4">نظرات کاربران</h5>
                        <div id="user-reviews">
                            <!-- User reviews will be loaded here -->
                            <p class="text-muted">هنوز نظری ثبت نشده است.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function() {
            // Sample Article Data
            const articles = [
                {
                    id: '1',
                    title: 'مقدمه‌ای بر قوانین طلاق در ایران',
                    image: 'https://via.placeholder.com/400x180/FF5733/FFFFFF?text=Divorce',
                    shortText: 'طلاق یکی از مباحث پیچیده در حقوق خانواده است که شامل انواع مختلفی از جمله طلاق توافقی، طلاق به درخواست زن و طلاق به درخواست مرد می‌شود...',
                    fullContent: 'طلاق یکی از مباحث پیچیده و حساس در حقوق خانواده است که شامل انواع مختلفی مانند طلاق توافقی، طلاق به درخواست زن (با شرایط خاص) و طلاق به درخواست مرد (با پرداخت حقوق مالی زن) می‌شود. آگاهی از قوانین و مراحل هر نوع طلاق برای زوجین ضروری است. مشورت با وکیل متخصص در این زمینه می‌تواند به زوجین در اتخاذ تصمیمات درست و جلوگیری از مشکلات احتمالی کمک کند. این مقاله به بررسی کلیات قوانین طلاق در ایران و مراحل رایج آن می‌پردازد و سعی دارد ابعاد مختلف این موضوع را روشن سازد.'
                },
                {
                    id: '2',
                    title: 'حقوق مهریه و نحوه مطالبه آن',
                    image: 'https://via.placeholder.com/400x180/33FF57/FFFFFF?text=Dowry',
                    shortText: 'مهریه حق مالی زن است که به محض عقد نکاح بر ذمه شوهر قرار می‌گیرد. این حق قابل مطالبه در هر زمان است...',
                    fullContent: 'مهریه یکی از مهم‌ترین حقوق مالی است که به محض جاری شدن صیغه عقد نکاح بر ذمه زوج قرار می‌گیرد و زن می‌تواند در هر زمانی نسبت به مطالبه آن اقدام کند، چه در طول زندگی مشترک و چه پس از طلاق. شیوه تعیین مهریه و نحوه مطالبه آن از طریق دادگاه یا اجرای ثبت دارای جزئیات قانونی است که عدم اطلاع از آن می‌تواند منجر به طولانی شدن فرایند شود. در این مقاله به بررسی دقیق انواع مهریه، شرایط مطالبه آن، مراحل قانونی وصول مهریه و نکات مهمی که باید بدانید، خواهیم پرداخت تا زوجین با آگاهی کامل‌تری نسبت به حقوق و تکالیف خود رفتار کنند.'
                },
                {
                    id: '3',
                    title: 'حضانت فرزندان پس از طلاق: بررسی قوانین جدید',
                    image: 'https://via.placeholder.com/400x180/5733FF/FFFFFF?text=Custody',
                    shortText: 'تصمیم‌گیری در مورد حضانت فرزندان پس از طلاق همواره یکی از چالش‌برانگیزترین مسائل بوده است. قوانین جدید چه می‌گویند؟',
                    fullContent: 'مسئله حضانت فرزندان پس از طلاق همواره یکی از چالش‌برانگیزترین و حساس‌ترین مسائل در دعاوی خانوادگی است. قانونگذار با در نظر گرفتن مصلحت عالیه فرزندان، اصول و قواعدی را برای تعیین حضانت وضع کرده است. این مقاله به بررسی تفصیلی قوانین مربوط به حضانت، تفاوت آن با ولایت قهری، شرایط تعیین حضانت پدر و مادر، و همچنین نقش دادگاه در تعیین حضانت با توجه به سن فرزندان و شرایط خاص هر پرونده می‌پردازد. آگاهی از این قوانین می‌تواند به والدین کمک کند تا با دید بازتری نسبت به آینده فرزندان خود تصمیم‌گیری کنند.'
                },
                {
                    id: '4',
                    title: 'قوانین ارث و انحصار وراثت',
                    image: 'https://via.placeholder.com00x180/FF33A8/FFFFFF?text=Inheritance',
                    shortText: 'آشنایی با قوانین ارث و مراحل انحصار وراثت برای تقسیم ماترک متوفی از اهمیت بالایی برخوردار است...',
                    fullContent: 'پس از فوت هر شخص، اموال و دارایی‌های او (ماترک) بر اساس قوانین ارث بین ورثه تقسیم می‌شود. فرآیند انحصار وراثت، گام اول و اساسی برای شناسایی وراث قانونی و تقسیم عادلانه ارث است. این مقاله به تفصیل به بررسی قوانین ارث در ایران، سهم‌الارث هر یک از طبقات و درجات وراث، مراحل قانونی اخذ گواهی انحصار وراثت، مالیات بر ارث، و همچنین نکاتی در خصوص وصیت‌نامه و تاثیر آن بر تقسیم ارث می‌پردازد. هدف این است که خوانندگان با آگاهی کامل از این مباحث، بتوانند فرآیند پیچیده ارث و میراث را به درستی طی کنند.'
                },
                {
                    id: '5',
                    title: 'حدود مسئولیت وکیل در دعاوی قضایی',
                    image: 'https://via.placeholder.com/400x180/33A8FF/FFFFFF?text=Lawyer+Responsibility',
                    shortText: 'درک صحیح از حدود مسئولیت وکیل در قبال موکل، هم برای وکیل و هم برای موکل حیاتی است...',
                    fullContent: 'رابطه وکیل و موکل بر پایه اعتماد متقابل بنا شده است، اما این رابطه دارای چهارچوب‌های قانونی و اخلاقی روشنی است که حدود مسئولیت وکیل را مشخص می‌کند. این مقاله به بررسی تفصیلی مسئولیت‌های مدنی، کیفری و انتظامی وکلای دادگستری می‌پردازد. همچنین، به نکاتی مانند اهمیت قرارداد وکالت، حفظ اسرار موکل، انجام تکالیف محوله با دقت و صداقت، و عواقب تخلف از این مسئولیت‌ها اشاره خواهد شد. درک این اصول برای هر دو طرف، یعنی وکلای محترم و موکلین گرامی، بسیار مهم است تا از هرگونه سوءتفاهم یا مشکل قانونی جلوگیری شود.'
                },
                {
                    id: '6',
                    title: 'انواع سند رسمی و عادی و تفاوت آنها',
                    image: 'https://via.placeholder.com/400x180/FF8C33/FFFFFF?text=Document+Types',
                    shortText: 'شناخت تفاوت‌های سند رسمی و عادی برای هرگونه معامله و اثبات مالکیت ضروری است...',
                    fullContent: 'در نظام حقوقی ایران، اسناد به دو دسته کلی رسمی و عادی تقسیم می‌شوند که هر یک از آنها آثار حقوقی و قدرت اثباتی متفاوتی دارند. این مقاله به بررسی تفاوت‌های جوهری میان سند رسمی (که در دفاتر اسناد رسمی و با حضور مامور رسمی تنظیم می‌شود) و سند عادی (که بدون دخالت مامور رسمی و صرفاً با امضای طرفین ایجاد می‌شود) می‌پردازد. مواردی نظیر نحوه تنظیم، قدرت اثباتی، قابلیت انکار و تردید، و کاربردهای هر یک از این اسناد در دعاوی حقوقی به تفصیل مورد بحث قرار خواهد گرفت تا خوانندگان با درک عمیق‌تری از اعتبار اسناد، بتوانند در معاملات و امور حقوقی خود با اطمینان خاطر بیشتری عمل کنند.'
                },
                {
                    id: '7',
                    title: 'چگونگی ثبت دعوا و مراحل رسیدگی آن در دادگاه',
                    image: 'https://via.placeholder.com/400x180/33FFBA/FFFFFF?text=Litigation',
                    shortText: 'از تنظیم دادخواست تا صدور حکم، آشنایی با مراحل ثبت و رسیدگی به دعوا در دادگاه از اهمیت ویژه‌ای برخوردار است...',
                    fullContent: 'ورود به فرآیند قضایی و طرح دعوا در دادگاه، مستلزم آشنایی با مراحل قانونی متعددی است. این مقاله به صورت گام به گام، چگونگی ثبت یک دعوا از مرحله تنظیم دادخواست و تقدیم آن به مراجع قضایی تا مراحل رسیدگی در دادگاه بدوی، تجدیدنظر و در نهایت اجرای حکم را تشریح می‌کند. نکاتی در خصوص انتخاب نوع دادگاه صالح، اهمیت اسناد و مدارک، نحوه حضور در جلسات دادرسی، و امکان اعتراض به آراء صادره نیز مورد بررسی قرار می‌گیرد. هدف از این مقاله، ارائه یک راهنمای جامع برای افرادی است که قصد طرح دعوا یا دفاع در برابر آن را دارند.'
                },
                {
                    id: '8',
                    title: 'جرایم سایبری و راه‌های پیشگیری از آنها',
                    image: 'https://via.placeholder.com/400x180/FF33FF/FFFFFF?text=Cybercrime',
                    shortText: 'با گسترش فضای مجازی، شناخت جرایم سایبری و روش‌های مقابله با آنها برای حفظ امنیت اطلاعات ضروری است...',
                    fullContent: 'با توسعه روزافزون فناوری اطلاعات و ارتباطات، جرایم سایبری نیز به یکی از تهدیدات جدی در جامعه تبدیل شده‌اند. این جرایم طیف وسیعی از رفتارهای غیرقانونی را شامل می‌شوند، از کلاهبرداری اینترنتی و فیشینگ گرفته تا سرقت اطلاعات و هک. این مقاله به معرفی انواع رایج جرایم سایبری، قوانین مرتبط با آنها در ایران، و مهم‌تر از همه، راهکارهای عملی و اثربخش برای پیشگیری از قربانی شدن در برابر این حملات می‌پردازد. آگاهی از این مسائل برای حفظ امنیت اطلاعات شخصی و مالی در فضای مجازی برای همه کاربران ضروری است.'
                },
                {
                    id: '9',
                    title: 'نکات مهم در تنظیم قراردادها',
                    image: 'https://via.placeholder.com/400x180/33FF8C/FFFFFF?text=Contracts',
                    shortText: 'یک قرارداد خوب و محکم می‌تواند از بسیاری از اختلافات آتی جلوگیری کند. با اصول تنظیم قراردادها آشنا شوید...',
                    fullContent: 'تنظیم یک قرارداد دقیق و جامع، سنگ بنای هرگونه معامله یا انجام هر فعالیتی است که بین اشخاص یا نهادها صورت می‌گیرد. یک قرارداد خوب می‌تواند از بروز اختلافات احتمالی در آینده جلوگیری کرده و حقوق و تکالیف طرفین را به وضوح مشخص سازد. این مقاله به بررسی اصول و نکات کلیدی در تنظیم انواع قراردادها می‌پردازد؛ از جمله ذکر دقیق مشخصات طرفین، موضوع قرارداد، مدت زمان، تعهدات متقابل، ضمانت اجراها و شرایط فسخ. همچنین، به اهمیت مشورت با کارشناسان حقوقی در تنظیم قراردادهای complex اشاره خواهد شد.'
                },
                {
                    id: '10',
                    title: 'حقوق کارگر و کارفرما در قانون کار',
                    image: 'https://via.placeholder.com/400x180/A833FF/FFFFFF?text=Labor+Law',
                    shortText: 'قانون کار مجموعه‌ای از حقوق و تکالیف برای کارگران و کارفرمایان تعیین کرده است که شناخت آنها ضروری است...',
                    fullContent: 'قانون کار جمهوری اسلامی ایران مجموعه‌ای از قوانین و مقررات است که به منظور تنظیم روابط بین کارگر و کارفرما و حمایت از حقوق و تکالیف متقابل آنها تدوین شده است. آگاهی از این قوانین برای هر دو طرف – کارگران برای احقاق حقوق خود و کارفرمایان برای رعایت الزامات قانونی – حیاتی است. این مقاله به بررسی مهم‌ترین جنبه‌های قانون کار، از جمله قرارداد کار، حقوق و دستمزد، ساعات کار، مرخصی‌ها، بیمه، شرایط پایان کار، و حل و فصل اختلافات کارگر و کارفرمایی می‌پردازد. هدف از این مقاله، آشنایی جامع با حقوق و تکالیف در محیط کار است.'
                },
                {
                    id: '11',
                    title: 'روش‌های حل اختلاف غیر قضایی: داوری و میانجیگری',
                    image: 'https://via.placeholder.com/400x180/FF5733/FFFFFF?text=ADR',
                    shortText: 'علاوه بر دادگاه، روش‌های دیگری نیز برای حل اختلافات وجود دارد که می‌تواند سریع‌تر و کم‌هزینه‌تر باشد...',
                    fullContent: 'در بسیاری از موارد، حل اختلافات از طریق مراجع قضایی می‌تواند زمان‌بر و پرهزینه باشد. به همین دلیل، روش‌های حل اختلاف غیر قضایی (Alternative Dispute Resolution - ADR) مانند داوری و میانجیگری، به عنوان جایگزین‌هایی مناسب و کارآمد مطرح شده‌اند. این مقاله به بررسی مفهوم، مزایا، و مراحل هر یک از روش‌های داوری و میانجیگری می‌پردازد و تفاوت‌های آنها را تشریح می‌کند. همچنین، به مواردی که استفاده از این روش‌ها توصیه می‌شود و اثرات قانونی آراء و توافقات حاصله، اشاره خواهد شد تا افراد با گزینه‌های موجود برای حل مسالمت‌آمیز اختلافات خود آشنا شوند.'
                },
                {
                    id: '12',
                    title: 'تفاوت دعاوی حقوقی و کیفری و پیامدهای آنها',
                    image: 'https://via.placeholder.com/400x180/33B5FF/FFFFFF?text=Civil+vs+Criminal',
                    shortText: 'درک تفاوت بین دعاوی حقوقی و کیفری، کلید انتخاب مسیر قانونی صحیح و شناخت پیامدهای هر یک است...',
                    fullContent: ' نظام حقوقی شامل دو دسته اصلی از دعاوی است: دعاوی حقوقی و دعاوی کیفری. هر یک از این دو دسته دارای ماهیت، اهداف، آیین دادرسی، و پیامدهای حقوقی متفاوتی هستند. این مقاله به صورت جامع به تشریح تفاوت‌های اساسی بین دعاوی حقوقی (که عمدتاً با هدف جبران خسارت و استیفای حقوق افراد انجام می‌شود) و دعاوی کیفری (که با هدف مجازات مجرم و حفظ نظم عمومی مطرح می‌گردد) می‌پردازد. آشنایی با این تفاوت‌ها برای هر فردی که درگیر یک مسئله حقوقی یا جزایی می‌شود، ضروری است تا بتواند تصمیمات آگاهانه‌ای در قبال پرونده خود اتخاذ کند.'
                }
            ];

            // Dummy storage for reviews (in a real app, this would be a database)
            let articleReviews = {};

            function renderCards(filteredArticles) {
                const container = $('#article-cards-container');
                container.empty(); // Clear existing cards
                filteredArticles.forEach(article => {
                    const cardHtml = `
                        <div class="card-item" data-id="${article.id}">
                            <img src="${article.image}" class="card-img-top" alt="${article.title}">
                            <div class="card-body">
                                <h2 class="card-title">${article.title}</h2>
                                <p class="card-text">${article.shortText}</p>
                            </div>
                        </div>
                    `;
                    container.append(cardHtml);
                });

                // Limit initial display to 4 cards, and add horizontal scroll
                if (filteredArticles.length > 4) {
                    container.css({
                        'overflow-x': 'auto',
                        'white-space': 'nowrap',
                        'justify-content': 'flex-start'
                    });
                    $('.card-item').css('display', 'inline-block');
                } else {
                    container.css({
                        'overflow-x': 'hidden',
                        'white-space': 'normal',
                        'justify-content': 'center'
                    });
                     $('.card-item').css('display', 'block'); // Or flex-shrink: 0, flex-grow: 0
                }
            }

            // Initial render of the first 4 cards
            renderCards(articles.slice(0, 4));

            // Show All Articles Button
            $('#show-all-articles-btn').on('click', function() {
                renderCards(articles);
                $(this).hide(); // Hide the button after showing all
            });

            // Handle Card Click (Open Modal)
            $(document).on('click', '.card-item', function() {
                const articleId = $(this).data('id');
                const article = articles.find(a => a.id === articleId);

                if (article) {
                    $('#modalArticleTitle').text(article.title);
                    $('#modalArticleImage').attr('src', article.image).attr('alt', article.title);
                    $('#modalArticleContent').text(article.fullContent);
                    $('.rating-stars').attr('data-article-id', article.id); // Set article ID for rating
                    $('#selected-rating').val(0); // Reset rating
                    $('.rating-stars .fa-star').removeClass('active'); // Reset stars
                    $('#review-comment').val(''); // Clear comment box
                    loadReviews(article.id); // Load existing reviews for this article
                    $('#articleDetailModal').modal('show');
                }
            });

            // Rating Stars Logic
            let currentRating = 0;
            $('.rating-stars .fa-star').on('click', function() {
                const clickedRating = $(this).data('rating');
                currentRating = clickedRating;
                $('#selected-rating').val(currentRating);
                $('.rating-stars .fa-star').each(function() {
                    if ($(this).data('rating') <= currentRating) {
                        $(this).addClass('active');
                    } else {
                        $(this).removeClass('active');
                    }
                });
            });

            // Hover effect for rating stars
            $('.rating-stars .fa-star').on('mouseenter', function() {
                const hoverRating = $(this).data('rating');
                $('.rating-stars .fa-star').each(function() {
                    if ($(this).data('rating') <= hoverRating) {
                        $(this).addClass('active');
                    } else {
                        $(this).removeClass('active');
                    }
                });
            }).on('mouseleave', function() {
                 $('.rating-stars .fa-star').each(function() {
                    if ($(this).data('rating') <= currentRating) {
                        $(this).addClass('active');
                    } else {
                        $(this).removeClass('active');
                    }
                });
            });

            // Submit Review Logic
            $('#submit-review-btn').on('click', function() {
                const articleId = $('.rating-stars').data('article-id');
                const rating = $('#selected-rating').val();
                const comment = $('#review-comment').val().trim();

                if (rating === '0' || comment === '') {
                    alert('لطفاً امتیاز و نظر خود را وارد کنید.');
                    return;
                }

                // Simulate saving review (in a real app, send to server)
                if (!articleReviews[articleId]) {
                    articleReviews[articleId] = [];
                }
                const newReview = {
                    rating: parseInt(rating),
                    comment: comment,
                    date: new Date().toLocaleDateString('fa-IR')
                };
                articleReviews[articleId].push(newReview);
                alert('نظر شما با موفقیت ثبت شد!');

                // Clear form and reload reviews
                $('#selected-rating').val(0);
                $('.rating-stars .fa-star').removeClass('active');
                $('#review-comment').val('');
                currentRating = 0; // Reset internal rating state

                loadReviews(articleId);
            });

            function loadReviews(articleId) {
                const reviewsContainer = $('#user-reviews');
                reviewsContainer.empty();

                const reviews = articleReviews[articleId] || [];

                if (reviews.length === 0) {
                    reviewsContainer.append('<p class="text-muted">هنوز نظری ثبت نشده است.</p>');
                    return;
                }

                reviews.forEach(review => {
                    const starsHtml = Array(review.rating).fill('<i class="fa-solid fa-star active text-warning"></i>').join('') +
                                      Array(5 - review.rating).fill('<i class="fa-solid fa-star"></i>').join('');
                    const reviewHtml = `
                        <div class="card p-3 mb-2">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>${starsHtml}</div>
                                <small class="text-muted">${review.date}</small>
                            </div>
                            <p class="mt-2 mb-0">${review.comment}</p>
                        </div>
                    `;
                    reviewsContainer.append(reviewHtml);
                });
            }

            // Search functionality
            $('#search-button, #search-input').on('click keyup', function(event) {
                if (event.type === 'keyup' && event.key !== 'Enter' && event.key !== 'NumpadEnter') {
                    return; // Only trigger on Enter key for keyup
                }

                const searchTerm = $('#search-input').val().trim();
                let filteredArticles = articles;

                if (searchTerm) {
                    filteredArticles = articles.filter(article =>
                        article.title.includes(searchTerm) || article.shortText.includes(searchTerm)
                    );
                }

                renderCards(filteredArticles);
                // If searching, hide "Show All" button and ensure container is scrollable if needed
                if (searchTerm) {
                    $('#show-all-articles-btn').hide();
                } else {
                    // If search cleared, show button if not all articles are currently displayed
                    if ($('.card-item').length < articles.length) {
                         $('#show-all-articles-btn').show();
                    }
                }
            });
        });
    </script>
</body>
</html>
```